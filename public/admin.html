<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"><link rel="stylesheet" href="style.css"><title>Admin Panel</title></head><body>
<div class="page-container"><h1>Admin Panel</h1><div class="admin-tabs"><button class="tab-btn active" onclick="showTab('users')">Users</button><button class="tab-btn" onclick="showTab('deposits')">Deposits</button><button class="tab-btn" onclick="showTab('withdrawals')">Withdrawals</button></div>
    <div id="users-tab" class="tab-content active"><div id="user-list" class="info-card"><h2>Loading...</h2></div></div>
    <div id="deposits-tab" class="tab-content"><div id="deposit-list" class="info-card"><h2>Loading...</h2></div></div>
    <div id="withdrawals-tab" class="tab-content"><div id="withdrawal-list" class="info-card"><h2>Loading...</h2></div></div>
</div>
<nav class="footer-nav"></nav><script src="/js/main.js"></script><script>
    if(!token||!decodeJwt(token)?.isAdmin)document.body.innerHTML='<h1>Access Denied</h1>';
    function showTab(tabName){document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.getElementById(`${tabName}-tab`).classList.add('active');document.querySelector(`button[onclick="showTab('${tabName}')"]`).classList.add('active');}
    async function handleAdminAction(url,body){if(!confirm('Are you sure?'))return;try{const r=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json','x-auth-token':token},body:JSON.stringify(body)});const d=await r.json();alert(d.message);if(r.ok)fetchAllData();}catch(e){alert('An error occurred.');}}
    async function addBalance(userId){const amount=Number(document.getElementById(`amount-${userId}`).value);if(!amount||amount<=0){alert('Invalid amount');return;}handleAdminAction('/api/admin/add-balance',{userId,amount});}
    async function approveDeposit(depositId){handleAdminAction('/api/admin/approve-deposit',{depositId});}
    async function rejectDeposit(depositId){handleAdminAction('/api/admin/reject-deposit',{depositId});}
    async function approveWithdrawal(withdrawalId){handleAdminAction('/api/admin/approve-withdrawal',{withdrawalId});}
    async function rejectWithdrawal(withdrawalId){handleAdminAction('/api/admin/reject-withdrawal',{withdrawalId});}
    async function fetchAllData(){/* Fetch and render all 3 lists */}
    document.addEventListener('DOMContentLoaded',fetchAllData);
</script></body>
</html>
